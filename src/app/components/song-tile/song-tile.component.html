<mat-card class="glass-card" (click)="onTileClick()">
  <mat-card-content class="song-tile-content">
    <div class="song-details">
      <h3 class="song-title">{{ song().song_details.title || 'Unknown Title' }}</h3>
      @if (song().song_details.subtitle) {
        <p class="song-subtitle">{{ song().song_details.subtitle }}</p>
      }
      <p class="song-composer">{{ song().song_details.composer || 'Unknown Composer' }}</p>
    </div>

    @if (config().action === 'add') {
      <div class="song-actions">
        <button
          mat-button
          [disabled]="buttonState()?.disabled"
          (click)="onAddToLibrary($event)"
          [attr.aria-label]="buttonState()?.text"
          class="action-button"
          [class.loading]="buttonState()?.showSpinner"
        >
          @if (buttonState()?.showSpinner) {
            <mat-spinner diameter="20"></mat-spinner>
            <span>{{ buttonState()?.text }}</span>
          } @else {
            {{ buttonState()?.text }}
          }
        </button>
      </div>
    }
  </mat-card-content>

  @if (config().action === 'delete' && config().showFooter && addedDate()) {
    <mat-card-footer class="song-tile-footer">
      <small class="song-added-date">Added {{ addedDate() | date: 'short' }}</small>
      <button
        mat-icon-button
        class="delete-button"
        [disabled]="buttonState()?.disabled"
        (click)="onDeleteClick($event)"
        aria-label="Delete song"
      >
        @if (buttonState()?.showSpinner) {
          <mat-spinner diameter="16"></mat-spinner>
        } @else {
          <mat-icon>delete</mat-icon>
        }
      </button>
    </mat-card-footer>
  }
</mat-card>
