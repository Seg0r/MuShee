<div class="library-container">
  <app-song-collection
    #songCollection
    [config]="libraryCollectionConfig()"
    [emptyStateTemplate]="currentEmptyStateTemplate()"
    [showBackToTop]="true"
    (tileClick)="onSongCardClick($event)"
    (deleteClick)="onSongDeleteClick($event)"
    (viewStateChange)="onCollectionStateChange($event)"
  ></app-song-collection>

  <app-empty-state
    #libraryEmptyState
    [message]="'Your library is empty'"
    [iconName]="'queue_music'"
  >
    <button mat-flat-button (click)="onUploadClick()">
      <mat-icon>cloud_upload</mat-icon>
      Upload Your Music
    </button>
    <button mat-button [routerLink]="['/app/discover']">
      <mat-icon>explore</mat-icon>
      Browse Public Library
    </button>
  </app-empty-state>

  <app-empty-state
    #librarySearchEmptyState
    [message]="'No songs found'"
    [description]="'Try adjusting your search terms'"
    [iconName]="'search_off'"
  >
    <button mat-button (click)="onClearSearch()">
      <mat-icon>clear</mat-icon>
      Clear Search
    </button>
  </app-empty-state>

  <div class="fab-container floating-fab-right">
    @if (!collectionState().isLoading && !collectionState().isEmpty) {
      <button
        mat-fab
        class="upload-fab floating-fab"
        (click)="onUploadClick()"
        aria-label="Upload a new song"
      >
        <mat-icon>cloud_upload</mat-icon>
      </button>
    }

    @if (!collectionState().isLoading && canFindSimilar()) {
      <button
        mat-fab
        class="find-similar-fab floating-fab"
        (click)="onFindSimilarClick()"
        aria-label="Find similar music"
      >
        <mat-icon>lightbulb</mat-icon>
      </button>
    }
  </div>
</div>
