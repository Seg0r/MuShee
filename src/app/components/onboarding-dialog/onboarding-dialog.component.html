<div mat-dialog-container class="onboarding-dialog">
  <!-- Header with Close Button -->
  <div class="dialog-header">
    <h2>Welcome to MuShee</h2>
    <button
      mat-icon-button
      (click)="onClose()"
      class="close-button"
      aria-label="Close onboarding dialog"
      [disabled]="isCompleting()"
    >
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Stepper -->
  <mat-stepper #stepper linear class="onboarding-stepper">
    <!-- Step 1: Upload Your Music -->
    <mat-step editable="false">
      <ng-template matStepLabel>
        <mat-icon class="step-icon">cloud_upload</mat-icon>
        <span>Upload</span>
      </ng-template>

      <div class="step-content">
        <div class="step-header">
          <mat-icon class="large-icon">cloud_upload</mat-icon>
          <h3>Upload Your Music</h3>
        </div>

        <p class="step-description">
          Upload your MusicXML files to build your personal sheet music library. Our platform
          supports standard MusicXML format files (.xml, .musicxml).
        </p>

        <div class="step-features">
          <ul>
            <li>Drag and drop or select files</li>
            <li>Supports .xml and .musicxml formats</li>
            <li>Maximum file size: 10 MB</li>
            <li>Automatic metadata extraction</li>
          </ul>
        </div>

        <button matButton="outlined" class="step-action-button" (click)="onNext()">
          <mat-icon>cloud_upload</mat-icon>
          Get Started
        </button>
      </div>
    </mat-step>

    <!-- Step 2: Browse Public Library -->
    <mat-step editable="false">
      <ng-template matStepLabel>
        <mat-icon class="step-icon">library_music</mat-icon>
        <span>Browse</span>
      </ng-template>

      <div class="step-content">
        <div class="step-header">
          <mat-icon class="large-icon">library_music</mat-icon>
          <h3>Browse Public Library</h3>
        </div>

        <p class="step-description">
          Explore our collection of public domain compositions. Discover new pieces to add to your
          library and expand your musical repertoire.
        </p>

        <div class="step-features">
          <ul>
            <li>Thousands of public domain works</li>
            <li>Easy search and filtering</li>
            <li>One-click add to library</li>
            <li>Instant access to sheet music</li>
          </ul>
        </div>

        <button matButton="outlined" class="step-action-button" (click)="onNext()">
          <mat-icon>explore</mat-icon>
          Explore Library
        </button>
      </div>
    </mat-step>

    <!-- Step 3: Get AI Recommendations -->
    <mat-step editable="false">
      <ng-template matStepLabel>
        <mat-icon class="step-icon">smart_toy</mat-icon>
        <span>AI Suggestions</span>
      </ng-template>

      <div class="step-content">
        <div class="step-header">
          <mat-icon class="large-icon">smart_toy</mat-icon>
          <h3>Get AI Recommendations</h3>
        </div>

        <p class="step-description">
          Let our AI analyze your music collection and suggest similar pieces you might enjoy.
          Powered by advanced music understanding and machine learning.
        </p>

        <div class="step-features">
          <ul>
            <li>AI-powered recommendations</li>
            <li>Personalized suggestions</li>
            <li>Rate and provide feedback</li>
            <li>Discover music you'll love</li>
          </ul>
        </div>

        <button matButton="outlined" class="step-action-button" (click)="onNext()">
          <mat-icon>lightbulb</mat-icon>
          Try AI Suggestions
        </button>
      </div>
    </mat-step>
  </mat-stepper>

  <!-- Footer Actions -->
  <div class="dialog-footer">
    <button
      mat-button
      (click)="onBack()"
      [disabled]="isFirstStep() || isCompleting()"
      class="footer-button"
    >
      Back
    </button>

    <div class="spacer"></div>

    @if (!isLastStep()) {
      <button mat-button (click)="onNext()" [disabled]="isCompleting()" class="footer-button">
        Next
      </button>
    } @else {
      <button
        matButton="filled"
        (click)="onGetStarted()"
        [disabled]="!canProceed()"
        class="footer-button get-started-button"
      >
        @if (isCompleting()) {
          <mat-icon class="spinner-icon">hourglass_empty</mat-icon>
          Getting Started...
        } @else {
          <mat-icon>play_arrow</mat-icon>
          Get Started
        }
      </button>
    }
  </div>
</div>
